<div class="col-md-9 effects clearfix" id="slide-up">

  <% @viewdata["data"].each do |val| %>
  <div class='img'>
    <img src="<%= val['images']['low_resolution']['url'] %>">
  <div class='overlay'><a href='#' class='expand'><h5><%= val['caption']['text'] %><%= link_to 'Favorite This', photos_path, class: 'btn btn-success' %></h5></a><a class='close-overlay hidden'>x</a></div>    </div>

  <% end %>

</div>

<script type="text/javascript">
$(function(){
  $(".img").mouseenter(function(){
      $(this).addClass("hover");
      $('.btn').on('click', function(){
        var closestImg = $(this).closest('.img');
        var photoUrl = closestImg.children().attr('src');
        $.ajax({
          url: '/photos',
          type: 'POST',
          data: JSON.stringify({url: photoUrl}),
          contentType: 'application/json',
          dataType: 'json'
        });
      });
  })
  // handle the mouseleave functionality
  .mouseleave(function(){
      $(this).removeClass("hover");
  });
});

</script>
